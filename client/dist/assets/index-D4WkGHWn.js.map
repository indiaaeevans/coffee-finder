{"version":3,"file":"index-D4WkGHWn.js","sources":["../../js/config.js","../../js/utils.js","../../js/script.js"],"sourcesContent":["export const API_URL = process.env.NODE_ENV === 'production'\n  ? 'https://coffee-finder-api.onrender.com'\n  : 'http://localhost:4000';","import { API_URL } from './config.js';\n\nconst CHAINS = [\n    'Starbucks',\n    'Dunkin',\n    'Costa Coffee',\n    'Tim Hortons',\n    'Caribou Coffee'\n];\n// map settings\nexport const PLACES_API_URL = `${API_URL}/api/v1/geo/places`;\nexport const REVERSE_GEOCODE_API_URL = `${API_URL}/api/v1/geo/reverse`;\nexport const FORWARD_GEOCODE_API_URL = `${API_URL}/api/v1/geo/forward`;\n\nexport const milesToMeters = (miles) => Math.round(miles * 1609.34);\nexport const metersToMiles = (meters) => (meters / 1609.34).toFixed(2);\n\nexport const throttle = (func, limit) => {\n    let inThrottle;\n    return function (...args) {\n        if (!inThrottle) {\n            func.apply(this, args);\n            inThrottle = true;\n            setTimeout(() => inThrottle = false, limit);\n        }\n    }\n};\n\nexport const isChain = (name) => {\n    return CHAINS.some(chain => name.toLowerCase().includes(chain.toLowerCase()));\n}\n\nexport const getAddressFromCoords = async (latitude, longitude) => {\n    const url = new URL(REVERSE_GEOCODE_API_URL);\n    const params = new URLSearchParams({\n        latitude,\n        longitude\n    });\n    url.search = params.toString();\n    const response = await fetch(url.toString());\n    if (!response.ok) {\n        throw new Error('Network response was not ok');\n    }\n    const data = await response.json();\n    if (!data.results || data.results.length === 0) {\n        throw new Error(`Unable to find address for coordinates: ${latitude}, ${longitude}`);\n    }\n    return data.results[0].address_line1;\n}\n\nexport const getCoordsFromAddress = async (address) => {\n    const url = new URL(FORWARD_GEOCODE_API_URL);\n    const params = new URLSearchParams({\n        address\n    });\n    url.search = params.toString();\n    const response = await fetch(url.toString());\n    if (!response.ok) {\n        throw new Error('Network response was not ok');\n    }\n    const data = await response.json();\n    if (!data.results || data.results.length === 0) {\n        throw new Error(`Unable to find coordinates for address: ${address}`);\n    }\n    return { latitude: data.results[0].lat, longitude: data.results[0].lon, address: data.results[0].address_line1 };\n}\n\nexport const getNearbyPlaces = async (longitude, latitude, radiusMeters, limit) => {\n    const url = new URL(PLACES_API_URL);\n    const params = new URLSearchParams({\n        longitude,\n        latitude,\n        radius: radiusMeters,\n        limit\n    });\n    url.search = params.toString();\n\n    const response = await fetch(url.toString());\n    if (!response.ok) {\n        throw new Error('Network response was not ok');\n    }\n    const result = await response.json();\n\n    return result.features.map(feature => ({\n        ...feature,\n        properties: {\n            ...feature.properties,\n            indie: !isChain(feature.properties.name)\n        }\n    }));\n}\n","import { getAddressFromCoords, getCoordsFromAddress, getNearbyPlaces, milesToMeters, metersToMiles, throttle } from './utils.js';\n\nconst DEFAULT_LATITUDE = 35.994034;\nconst DEFAULT_LONGITUDE = -78.898621;\nconst DEFAULT_ZOOM_LEVEL = 12; // TODO adjust zoom level based on radius\n\n// icons\nconst LOCATION_ICON_URL = 'images/location.svg';\nconst CHAIN_ICON_URL = 'images/skull.svg';\nconst INDIE_ICON_URL = 'images/coffee.svg';\n// OSM\nconst TILE_LAYER_URL = 'https://tile.openstreetmap.org/{z}/{x}/{y}.png';\nconst MAP_ATTRIBUTION = '&copy; <a href=\"http://www.openstreetmap.org/copyright\">OpenStreetMap</a>'\n// state\nlet map, circle;\nlet resultsLimit = 20; // TODO user input for # of results\nlet startingLocationMarker, mapMarkers;\n\ndocument.addEventListener('DOMContentLoaded', () => {\n    // dom elements\n    const formEl = document.getElementById('coffee-form');\n    const useCurrentLocationBtnEl = document.getElementById('coffee-form__use-current-location');\n    const startingLocationInputEl = document.getElementById('coffee-form__starting-location');\n    const maxRadiusInputEl = document.getElementById('coffee-form__max-radius');\n    const resultsListEl = document.getElementById('results-list');\n    const resultsCountEl = document.querySelector('.results-summary__results-count');\n    const resultsContainerEl = document.querySelector('.results-container');\n    const filterChainsSwitchEl = document.getElementById('filter-switch');\n    const toggleResultsViewEl = document.querySelector('.toggle-results');\n    const toggleResultsWrapperEl = document.querySelector('.toggle-results-wrapper');\n    const locationErrorMsgEl = document.getElementById('coffee-form__starting-location-err');\n    const loadingEl = document.querySelector('.loading-wrapper');\n\n    toggleResultsViewEl.addEventListener('click', function () {\n        resultsContainerEl.classList.toggle('expanded');\n        if (resultsContainerEl.classList.contains('expanded')) {\n            toggleResultsViewEl.textContent = 'Collapse list view';\n        } else {\n            toggleResultsViewEl.textContent = 'Expand list view';\n        }\n    });\n\n\n    filterChainsSwitchEl.addEventListener('click', function () {\n        const checked = this.getAttribute('aria-checked') === 'true';\n        this.setAttribute('aria-checked', String(!checked));\n    });\n\n    function checkResultsOverflow() {\n        // if expanded view was left on, don't check for overflow\n        if (resultsContainerEl.classList.contains('expanded')) {\n            return;\n        }\n        if (resultsContainerEl.scrollHeight > resultsContainerEl.clientHeight) {\n            toggleResultsWrapperEl.style.display = 'block'; // TODO toggle class instead?\n        } else {\n            toggleResultsWrapperEl.style.display = 'none';\n        }\n    }\n    function showLoading() {\n        loadingEl.classList.remove('hidden');\n    }\n\n    function hideLoading() {\n        loadingEl.classList.add('hidden');\n    }\n    function hideFormErrorMsg() {\n        locationErrorMsgEl.textContent = '';\n        locationErrorMsgEl.classList.add('hidden');\n    }\n    window.addEventListener('resize', throttle(checkResultsOverflow, 250));\n\n    function initializeMap(latitude = DEFAULT_LATITUDE, longitude = DEFAULT_LONGITUDE, zoomLevel = DEFAULT_ZOOM_LEVEL) {\n        // create the map w/ current location\n        map = L.map('map', {\n            zoomControl: false\n        }).setView([latitude, longitude], zoomLevel);\n        // add the zoom control to the top right corner\n        L.control.zoom({\n            position: 'bottomright'\n        }).addTo(map);\n        // add map tiles\n        L.tileLayer(TILE_LAYER_URL, {\n            maxZoom: 19,\n            attribution: MAP_ATTRIBUTION\n        }).addTo(map);\n        mapMarkers = L.layerGroup([]);\n\n        // create a custom leaflet control for the search form element\n        L.Control.CustomControl = L.Control.extend({\n            onAdd: function (map) {\n                var container = L.DomUtil.get('coffee-form');\n                // Prevent click events from propagating to the map\n                L.DomEvent.disableClickPropagation(container);\n                // unhide the form\n                container.style.display = 'block';\n                return container;\n            }\n        });\n        // Create a constructor function for easy instantiation\n        L.control.customControl = function (opts) {\n            return new L.Control.CustomControl(opts);\n        }\n        // Add the custom control to the map\n        L.control.customControl({ position: 'topleft' }).addTo(map);\n    }\n\n    const initializeMapWithCurrentLocation = async () => {\n        try {\n            showLoading();\n            const { latitude, longitude } = await getCurrentLocation();\n            initializeMap(latitude, longitude);\n        } catch (error) {\n            console.error('Failed to get current location: ', error);\n            console.info('Setting map to default location.');\n            initializeMap();\n        } finally {\n            hideLoading();\n        }\n    };\n\n    initializeMapWithCurrentLocation();\n\n    const locationIcon = L.icon({\n        iconUrl: LOCATION_ICON_URL,\n        mapIconColor: '#cc756b',\n        iconSize: [32, 32], // size of the icon in px\n        popupAnchor: [0, -16], // coordinates of the point from which the popup should open relative to the iconAnchor\n    });\n    const chainIcon = L.icon({\n        iconUrl: CHAIN_ICON_URL,\n        iconSize: [28, 28], // size of the icon in px\n        popupAnchor: [0, -16], // coordinates of the point from which the popup should open relative to the iconAnchor\n    });\n    const indieIcon = L.icon({\n        iconUrl: INDIE_ICON_URL,\n        iconSize: [32, 32], // size of the icon in px\n        // iconAnchor:   [10, 10], // coordinates of the \"tip\" of the icon (relative to its top left corner)\n        popupAnchor: [0, -16] // coordinates of the point from which the popup should open relative to the iconAnchor\n    });\n\n    function clearMap() {\n        resultsContainerEl.classList.add('hidden');\n        if (circle) {\n            map.removeLayer(circle);\n        }\n        mapMarkers.removeFrom(map);\n        mapMarkers.clearLayers();\n        resultsListEl.innerHTML = '';\n    }\n\n    function displayResults(results, maxRadiusMiles) {\n        if (results.length === 0) {\n            resultsCountEl.textContent = `No coffee shops found within ${maxRadiusMiles} ${maxRadiusMiles > 1 ? 'miles' : 'mile'}.`;\n            resultsContainerEl.classList.remove('hidden');\n            return;\n        }\n\n        const ul = document.createElement('ul');\n\n        results.forEach(feature => {\n            const li = document.createElement('li');\n            const name = feature.properties.name;\n            const distance = metersToMiles(feature.properties.distance);\n            const isIndie = feature.properties.indie;\n\n            // Add the appropriate class based on whether it's a chain or indie\n            li.classList.add(isIndie ? 'indie' : 'chain');\n\n            // Create a link for the name if a website is available\n            const nameEl = document.createElement(feature.properties.website ? 'a' : 'span');\n            nameEl.textContent = name;\n            if (feature.properties.website) {\n                nameEl.href = feature.properties.website;\n                nameEl.target = '_blank'; // Open link in a new tab\n            }\n            const span = document.createElement('span');\n            span.appendChild(nameEl);\n            span.appendChild(document.createElement('br'));\n            const distanceSpan = document.createElement('span');\n            distanceSpan.classList.add('distance');\n            distanceSpan.textContent = `${distance} miles`;\n            span.appendChild(distanceSpan);\n            li.appendChild(span);\n            ul.appendChild(li);\n            let marker = L.marker(\n                [feature.properties.lat, feature.properties.lon], { icon: isIndie ? indieIcon : chainIcon }\n            );\n\n            // Create popup content with linked name\n            const popupContent = document.createElement('div');\n            const nameElPopup = document.createElement(feature.properties.website ? 'a' : 'span');\n            nameElPopup.textContent = name;\n            if (feature.properties.website) {\n                nameElPopup.href = feature.properties.website;\n                nameElPopup.target = '_blank'; // Open link in a new tab\n            }\n            popupContent.appendChild(nameElPopup);\n\n            marker.bindPopup(popupContent);\n            mapMarkers.addLayer(marker);\n        });\n        mapMarkers.addTo(map);\n        // adjust the map to fit all the markers\n        let bounds = mapMarkers.getLayers().map((marker) => {\n            return marker.getLatLng();\n        }).map((latlng) => [latlng.lat, latlng.lng]);\n        // use fitBounds instead for no animation\n        map.flyToBounds(bounds, {\n            padding: [50, 50],\n            maxZoom: 15        // Prevent too much zoom\n        });\n        // TODO add \"indie\" if chains filtered <span class=\"results-summary__descriptor\">indie</span>\n        resultsCountEl.textContent = `Found ${results.length} coffee shop${results.length !== 1 ? 's' : ''}.`;\n        resultsListEl.appendChild(ul);\n        resultsContainerEl.classList.remove('hidden');\n        checkResultsOverflow();\n    }\n\n    async function getCurrentLocation() {\n        return new Promise(function (resolve, reject) {\n            if (\"geolocation\" in navigator) {\n                navigator.geolocation.getCurrentPosition((position) => {\n                    const latitude = position.coords.latitude;\n                    const longitude = position.coords.longitude;\n                    resolve({ latitude, longitude });\n                }, (err) => {\n                    console.error(err);\n                    reject('Geolocation permissions may be turned off...');\n                });\n            } else {\n                reject('Geolocation is not supported by your browser.');\n            }\n        })\n    }\n\n    useCurrentLocationBtnEl.addEventListener('click', async () => {\n        try {\n            hideFormErrorMsg();\n            const { latitude, longitude } = await getCurrentLocation();\n            const address = await getAddressFromCoords(latitude, longitude);\n            startingLocationInputEl.value = address;\n            addStartingLocationMarker(latitude, longitude, address);\n            // use panTo for less animation\n            map.flyTo([latitude, longitude], DEFAULT_ZOOM_LEVEL);\n        } catch (error) {\n            console.error('Failed to get current location: ', error);\n            locationErrorMsgEl.textContent = 'Failed to get current location. Please try again with location services enabled.';\n            locationErrorMsgEl.classList.remove('hidden');\n        }\n    });\n\n    function addStartingLocationMarker(latitude, longitude, address) {\n        if (startingLocationMarker) {\n            startingLocationMarker.removeFrom(map);\n        }\n        startingLocationMarker = L.marker([latitude, longitude],\n            {\n                icon: locationIcon,\n                // draggable: true // TODO https://leafletjs.com/reference.html#marker-draggable\n            }\n        ).addTo(map);\n        startingLocationMarker.bindPopup(address);\n    }\n\n    formEl.addEventListener('submit', async (e) => {\n        e.preventDefault();\n        clearMap();\n        showLoading();\n\n        const startingLocation = startingLocationInputEl.value;\n        let locationData;\n        try {\n            locationData = await getCoordsFromAddress(startingLocation);\n        } catch (error) {\n            console.error('Error fetching coordinates:', error);\n            locationErrorMsgEl.textContent = 'Failed to locate your address. Please try again.';\n            locationErrorMsgEl.classList.remove('hidden');\n            hideLoading();\n            return;\n        }\n        hideFormErrorMsg();\n        const { latitude, longitude, address } = locationData;\n        // Continue with the rest of the code using latitude, longitude, and address\n        addStartingLocationMarker(latitude, longitude, address); // TODO update map to new location\n\n        const maxRadiusMiles = maxRadiusInputEl.value;\n        const maxRadiusMeters = milesToMeters(maxRadiusMiles);\n        const filterChains = filterChainsSwitchEl.getAttribute('aria-checked') === 'true';\n\n        // draw the radius on the map https://leafletjs.com/reference.html#layer\n        circle = L.circle([latitude, longitude], {\n            color: '#ED4A49',\n            fillColor: '#ED4A49',\n            fillOpacity: 0.1,\n            radius: maxRadiusMeters\n        }).addTo(map);\n\n        try {\n            let results = await getNearbyPlaces(longitude, latitude, maxRadiusMeters, resultsLimit);\n\n            if (filterChains) {\n                results = results.filter(feature => feature.properties.indie);\n            }\n            displayResults(results, maxRadiusMiles);\n        } catch (error) {\n            // TODO show error msg on the page\n            console.error('Error fetching nearby places:', error);\n        } finally {\n            hideLoading();\n        }\n    });\n\n});\n"],"names":["API_URL","CHAINS","PLACES_API_URL","REVERSE_GEOCODE_API_URL","FORWARD_GEOCODE_API_URL","milesToMeters","miles","metersToMiles","meters","throttle","func","limit","inThrottle","args","isChain","name","chain","getAddressFromCoords","latitude","longitude","url","params","response","data","getCoordsFromAddress","address","getNearbyPlaces","radiusMeters","feature","DEFAULT_LATITUDE","DEFAULT_LONGITUDE","DEFAULT_ZOOM_LEVEL","LOCATION_ICON_URL","CHAIN_ICON_URL","INDIE_ICON_URL","TILE_LAYER_URL","MAP_ATTRIBUTION","map","circle","resultsLimit","startingLocationMarker","mapMarkers","formEl","useCurrentLocationBtnEl","startingLocationInputEl","maxRadiusInputEl","resultsListEl","resultsCountEl","resultsContainerEl","filterChainsSwitchEl","toggleResultsViewEl","toggleResultsWrapperEl","locationErrorMsgEl","loadingEl","checked","checkResultsOverflow","showLoading","hideLoading","hideFormErrorMsg","initializeMap","zoomLevel","container","opts","getCurrentLocation","error","locationIcon","chainIcon","indieIcon","clearMap","displayResults","results","maxRadiusMiles","ul","li","distance","isIndie","nameEl","span","distanceSpan","marker","popupContent","nameElPopup","bounds","latlng","resolve","reject","position","err","addStartingLocationMarker","e","startingLocation","locationData","maxRadiusMeters","filterChains"],"mappings":"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"}